"0","# # Load necessary libraries"
"0","# # library(ggplot2)"
"0","# "
"0","# # Fit the initial multiple linear regression model"
"0","# linear_model <- lm(median_house_value ~ ., data = train_data)"
"0","# "
"0","# # Calculate the residuals"
"0","# train_residuals <- residuals(linear_model)"
"0","# "
"0","# # Create a data frame with residuals and corresponding ocean_proximity"
"0","# residuals_data <- data.frame(Residuals = train_residuals, Ocean_Proximity = train_data$ocean_proximity)"
"0","# "
"0","# # Create a boxplot of residuals before removing outliers"
"0","# ggplot(residuals_data, aes(y = Residuals, fill = Ocean_Proximity)) +"
"0","#   geom_boxplot() +"
"0","#   labs(title = ""Boxplot of Residuals Before Removing Outliers"", y = ""Residuals"", fill = ""Ocean Proximity"") +"
"0","#   theme_minimal()"
"0","# "
"0","# # ### Remove Outliers Using Z-Score Method"
"0","# "
"0","# # Calculate Z-scores for the residuals"
"0","# z_scores <- scale(train_residuals)"
"0","# "
"0","# # Set the threshold for identifying outliers (e.g., Z-score > 3 or < -3)"
"0","# threshold <- 3"
"0","# "
"0","# # Identify outliers"
"0","# outliers <- abs(z_scores) > threshold"
"0","# "
"0","# # Filter out the outliers in the training data"
"0","# outliers_filtered <- train_data[!outliers, ]"
"0","# "
"0","# # Fit the linear model on the filtered training data"
"0","# outliers_filtered_linear_model <- lm(median_house_value ~ ., data = outliers_filtered)"
"0","# "
"0","# # Extract Adjusted R-squared"
"0","# summary_model <- summary(outliers_filtered_linear_model)"
"0","# adj_r2 <- summary_model$adj.r.squared"
"0","# adj_r2"
"0","# "
"0","# # Calculate residuals using the filtered training data"
"0","# train_residuals_filtered <- residuals(outliers_filtered_linear_model)"
"0","# "
"0","# # Create a data frame with residuals and corresponding predictor variable"
"0","# residuals_data_filtered <- data.frame(Residuals = train_residuals_filtered, Ocean_Proximity = outliers_filtered$ocean_proximity)"
"0","# "
"0","# # Plot the boxplot of residuals after removing outliers"
"0","# p <- ggplot(residuals_data_filtered, aes(y = Residuals, fill = Ocean_Proximity)) +"
"0","#   geom_boxplot() +"
"0","#   labs(title = ""Boxplot of Residuals After Removing Outliers"", y = ""Residuals"", fill = ""Ocean Proximity"") +"
"0","#   theme_minimal()"
"0","# library(plotly)"
"0","# ggplotly(p)"
"0",""
"0",""
"0",""
"0","# Check normality of the residuals using Anderson-Darling test"
"0","#library(nortest)"
"0","#ad_test <- ad.test(train_residuals_filtered)"
"0","#print(ad_test)"
"0",""
"0","# Create Q-Q plot of the residuals after removing outliers"
"0","#qq_plot <- ggplot(data.frame(Residuals = train_residuals_filtered), aes(sample = Residuals)) +"
"0","  #stat_qq() +"
"0","  #stat_qq_line() +"
"0","  #ggtitle(""Q-Q Plot of Residuals After Removing Outliers"") +"
"0","  #xlab(""Theoretical Quantiles"") +"
"0"," # ylab(""Sample Quantiles"")"
"0",""
"0","#print(qq_plot)"
